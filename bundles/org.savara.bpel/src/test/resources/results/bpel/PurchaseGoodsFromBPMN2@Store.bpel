<?xml version="1.0" encoding="UTF-8"?><process xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:tns="http://www.savara.org" name="PurchaseGoods_Store" targetNamespace="http://www.savara.org">
    <import importType="http://schemas.xmlsoap.org/wsdl/" location="PurchaseGoods_Store.wsdl" namespace="http://www.savara.org"/>
    <import importType="http://schemas.xmlsoap.org/wsdl/" location="PurchaseGoods_CreditAgency.wsdl" namespace="http://www.savara.org"/>
    <import importType="http://schemas.xmlsoap.org/wsdl/" location="PurchaseGoods_Logistics.wsdl" namespace="http://www.savara.org"/>
    <import importType="http://schemas.xmlsoap.org/wsdl/" location="PurchaseGoods_StoreArtifacts.wsdl" namespace="http://www.savara.org"/>
    <partnerLinks>
        <partnerLink myRole="Store" name="BuyerToStore" partnerLinkType="tns:BuyerToStoreServiceLT"/>
        <partnerLink name="StoreToCreditAgency" partnerLinkType="tns:StoreToCreditAgencyLT" partnerRole="CreditAgency"/>
        <partnerLink name="StoreToLogistics" partnerLinkType="tns:StoreToLogisticsLT" partnerRole="Logistics"/>
    </partnerLinks>
    <variables>
        <variable messageType="tns:buyRequest" name="buyRequestVar"/>
        <variable messageType="tns:checkCreditRequest" name="checkCreditRequestVar"/>
        <variable messageType="tns:AccountNotFoundFault" name="AccountNotFoundFaultVar"/>
        <variable messageType="tns:checkCreditResponse" name="checkCreditResponseVar"/>
        <variable messageType="tns:InsufficientCreditFault" name="InsufficientCreditFaultVar"/>
        <variable messageType="tns:deliverRequest" name="deliverRequestVar"/>
        <variable messageType="tns:deliverResponse" name="deliverResponseVar"/>
        <variable messageType="tns:buyResponse" name="buyResponseVar"/>
    </variables>
    <sequence>
        <receive createInstance="yes" name="Receive_BuyRequest" operation="buy" partnerLink="BuyerToStore" portType="tns:Store" variable="buyRequestVar"/>
        <scope>
            <faultHandlers>
                <catch faultMessageType="tns:CustomerUnknownFault" faultName="tns:CustomerUnknown" faultVariable="CustomerUnknownFaultVar">
                    <sequence>
                        <reply faultName="tns:AccountNotFound" name="Send_AccountNotFound" operation="buy" partnerLink="BuyerToStore" portType="tns:Store" variable="AccountNotFoundFaultVar"/>
                    </sequence>
                </catch>
            </faultHandlers>
            <sequence>
                <invoke inputVariable="checkCreditRequestVar" name="Send_CreditCheck" operation="checkCredit" outputVariable="checkCreditResponseVar" partnerLink="StoreToCreditAgency" portType="tns:CreditAgency"/>
                <if>
                    <sequence>
                        <reply faultName="tns:InsufficientCredit" name="Send_BuyFailed" operation="buy" partnerLink="BuyerToStore" portType="tns:Store" variable="InsufficientCreditFaultVar"/>
                    </sequence>
                    <else>
                        <sequence>
                            <invoke inputVariable="deliverRequestVar" name="Send_DeliveryRequest" operation="deliver" outputVariable="deliverResponseVar" partnerLink="StoreToLogistics" portType="tns:Logistics"/>
                            <reply name="Send_BuyConfirmed" operation="buy" partnerLink="BuyerToStore" portType="tns:Store" variable="buyResponseVar"/>
                        </sequence>
                    </else>
                </if>
            </sequence>
        </scope>
    </sequence>
</process>